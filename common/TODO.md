# Tout doux

- [ ] keep todo list up to date
- [ ] Qobuz & Tidal offscreen.js now identical, delete and pass processor class from qobuzext.js & tidalext.js
- [ ] artists & labels "please scroll down" add button auto scroll
- [ ] github releases zip chromium && firefox
- [ ] send watch urls from background to injected code ? page load race condition ?
- [ ] keep downloaded tracks ids in storage && skip ?
- [ ] fix playlist indexes ++ unstreamable tracks
- [ ] edge extension breaks after some time, popup not opening, reload service worker inactive glitch / fix fail : extension listeners init first / edge://serviceworker-internals/
- [ ] file system permission directory ref better downloads management (duplicates, covers, ...)
- [ ] user library download & sync
- [ ] multiple tabs handling not stable
- [ ] track handled tabs load complete & clear media if unhandled content
- [ ] track all handled tabs load / focus and keep per tab id ==> media data
- [ ] popup top left settings btn & full size settings pane
- [ ] settings : quality, show covers in popup, download cover files, custom file naming template
- [ ] custom dirs & files naming %artist%/%album%/%trackno%. %tracktitle% etc
- [ ] single track pages
- [ ] rewrite simple CSS streamlined media list templates
- [x] fetch repo manifest compare versions show update hint
- [ ] single cover file download if album
- [x] last downloaded queue item not removed from popup dom ?
- [ ] remote control ? private channel between mobile web page and extension ? p2p ?
- [ ] popup messy progress & queue refresh
- [x] popup ditch downloadAlbum or types, use data-type and data-id
- [x] hide quality radio if no auth or link
- [x] background this.url base website global filter
- [x] import const DEBUG all scripts
- [ ] history prev & next not refreshing detected content
- [x] set download dir (artist, album, playlist) on order and build def download path on browser download
- [x] cleanup download handling resolve and revoke blob
- [x] ask tab reload on requests if no auth data
- [x] keep offscreen alive when downloading, kill when empty queue
- [x] pool scrolling pages content merge loading medias
- [x] unify background generic handleDownload method >> subclasses trackList find by id
- [ ] icon badge status tiny sub icon or queue size
- [ ] icon hint on error and show messages top popup / unstable
- [x] album download if various artists set directory album name only instead of splitting artists dirs
- [x] if various artists set file name {num}. {artist} - {title}
- [x] detect artist playlist label ... pages and batch download tracks
- [x] improve queue items infos
- [ ] show current download size or segments progress text ?
- [x] on open popup ask force sync queue
- [ ] connected account & premium state icon hint
- [ ] inject content download button in ⋮ menus ⋯
- [x] download album cover file
- [ ] check subscription status
- [x] massive downloads spam tests
- [ ] comments
- [x] fix async behavior
- [ ] closure compiler advanced optimizations